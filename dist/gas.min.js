/*
 Copyright 2011, Cardinal Path and Direct Performance.

 GAS - Google Analytics on Steroids
 https://bitbucket.org/dpc/gas

 @author Eduardo Cereto <eduardocereto@gmail.com>
 Licensed under the MIT license.
*/
(function(h,n){function q(){this.n()}function t(){var a=this;a.version="1.1.0";a.c={};a.k=0;a.m=E;a.i="_gas1";a.g={};a.f={_addHook:[a.o]};a.push(function(){a.g=new q})}function r(a){if(_gas.q)try{console.log(a)}catch(b){}return h._gaq.push(a)}function O(a,b){if(typeof a!=="string")return!1;var c=a.split("?")[0],c=c.split(".");return(c=c[c.length-1])&&this.j(b,c)?c:!1}function P(a){for(var b=this,c=g.getElementsByTagName("a"),d=0;d<c.length;d++)this.a(c[d],"mousedown",function(c){if(c.target&&c.target.tagName===
"A"){var d=O.call(b,c.target.href,a.extensions);d&&_gas.push(["_trackEvent",a.category,d,c.target.href])}})}function Q(a,b){function c(c){var d=c.target,d=d.name||d.id||d.type||d.nodeName,c=c.type,e=a.name||a.id||n;_gas.push(["_trackEvent",b.category,"form"+(e?" ("+e+")":""),d+" ("+c+")"])}var d=this;if(b.live)d.a(h,"click",function(a){try{var b=a.target;a.type=="click"&&d.j(["button","submit","image","reset"],b.type.toLowerCase())&&c(a)}catch(e){}}),d.a(g.body,"change",function(a){try{var b=a.target;
a.type=="change"&&d.j(["input","select","textarea","hidden"],b.nodeName.toLowerCase())&&c(a)}catch(e){}});else{var f,e;if(!a.elements||!a.elements.length)return!1;for(f=0;f<a.elements.length;f++)e=a.elements[f],d.j(["button","submit","image","reset"],e.type)?d.a(e,"click",c):d.a(e,"change",c);d.a(a,"submit",c)}}function z(a){_gas.push(["_trackEvent",this.tagName,a.type,this.currentSrc])}function G(a){var b=this;b.h(function(){for(var c=g.getElementsByTagName(a),d=0;d<c.length;d++)b.a(c[d],"play",
z),b.a(c[d],"ended",z),b.a(c[d],"pause",z)})}function H(){return Math.max(g.body.scrollHeight||0,o.scrollHeight||0,g.body.offsetHeight||0,o.offsetHeight||0,g.body.clientHeight||0,o.clientHeight||0)}function I(a){A&&clearTimeout(A);a===!0?k=Math.max(((h.pageYOffset||g.body.scrollTop||o.scrollTop||0)+(h.innerHeight||o.clientHeight||g.body.clientHeight||0))/H()*100,k):A=setTimeout(function(){k=Math.max(((h.pageYOffset||g.body.scrollTop||o.scrollTop||0)+(h.innerHeight||o.clientHeight||g.body.clientHeight||
0))/H()*100,k)},400)}function R(){I(!0);k=Math.floor(k);if(!(k<=0||k>100)){var a=(k>10?1:0)*(Math.floor((k-1)/10)*10+1),a=String(a)+"-"+String(Math.ceil(k/10)*10);_gas.push(["_trackEvent",u.category,J,a,Math.floor(k),!0])}}function s(a,b,c){if(c.contentWindow&&c.contentWindow.postMessage&&JSON){var d=c.getAttribute("src").split("?")[0],a=JSON.stringify({method:a,value:b});c.contentWindow.postMessage(a,d)}}function S(a){if(j.call(a.origin,"//player.vimeo.com")>-1)if(a=JSON.parse(a.data),a.event===
"ready")K.call(_gas.g);else if(a.method){if(a.method=="getVideoUrl")B[a.b]=a.value}else if(a.event==="playProgress"){if(!p[a.b])p[a.b]={},p[a.b].d=m.call(L);if(p[a.b].d.length>0&&a.data.s*100>=p[a.b].d[0]){var b=p[a.b].d.shift();_gas.push(["_trackEvent","Vimeo Video",b+"%",B[a.b]])}}else _gas.push(["_trackEvent",v.category,a.event,B[a.b]])}function K(){for(var a=g.getElementsByTagName("iframe"),b=0,c,d,f,e=v.force,F=v.percentages,i=0;i<a.length;i++)if(j.call(a[i].src,"//player.vimeo.com")>-1){c="gas_vimeo_"+
i;d=a[i].src;f="?";j.call(d,"?")>-1&&(f="&");if(j.call(d,"api=1")<0)if(e)d+=f+"api=1&player_id="+c;else continue;else j.call(d,"player_id=")<-1&&(d+=f+"player_id="+c);b++;a[i].id=c;if(a[i].src!==d){a[i].src=d;break}s("getVideoUrl","",a[i]);s("addEventListener","play",a[i]);s("addEventListener","pause",a[i]);s("addEventListener","finish",a[i]);F&&(L=F,s("addEventListener","playProgress",a[i]))}b>0&&M===!1&&(this.a(h,"message",S,!1),M=!0)}function C(a,b){if(l[b]==n||l[b].d.length<=0)return!1;if(a.getCurrentTime()/
a.getDuration()*100>=l[b].d[0]){var c=l[b].d.shift();_gas.push(["_trackEvent",w.category,c+"%",a.getVideoUrl()])}l[b].l=setTimeout(C,1E3,a,b)}function D(a){var b=a.getVideoData().video_id;l[b]&&l[b].l&&(C(a,b),clearTimeout(l[b].l))}function T(a){var b="";switch(a.data){case 0:b="finish";D(a.target);break;case 1:var b="play",c=a.target;if(x&&x.length){var d=c.getVideoData().video_id;l[d]?D(c):(l[d]={},l[d].d=m.call(x));l[d].l=setTimeout(C,1E3,c,d)}break;case 2:b="pause",D(a.target)}b&&_gas.push(["_trackEvent",
w.category,b,a.target.getVideoUrl()])}function U(a){_gas.push(["_trackEvent",w.category,"error ("+a.data+")",a.target.getVideoUrl()])}function V(){for(var a=g.getElementsByTagName("object"),b,c,d=/(https?:\/\/www\.youtube(-nocookie)?\.com[^/]*).*\/v\/([^&?]+)/,f=0;f<a.length;f++){b=a[f].getElementsByTagName("param");for(c=0;c<b.length;c++)if(b[c].name=="movie"&&b[c].value){if((c=b[c].value.match(d))&&c[1]&&c[3])b=g.createElement("iframe"),b.src=c[1]+"/embed/"+c[3]+"?enablejsapi=1",b.width=a[f].width,
b.height=a[f].height,b.setAttribute("frameBorder","0"),b.setAttribute("allowfullscreen",""),a[f].parentNode.insertBefore(b,a[f]),a[f].parentNode.removeChild(a[f]),f--;break}}}function W(a){var b=a.force,a=a.percentages;if(b)try{V()}catch(c){_gas.push(["_trackException",c,"GAS Error on youtube.js:_ytMigrateObjectEmbed"])}for(var d=[],f=g.getElementsByTagName("iframe"),e=0;e<f.length;e++)if(j.call(f[e].src,"//www.youtube.com/embed")>-1){if(j.call(f[e].src,"enablejsapi=1")<0)if(b)f[e].src+=j.call(f[e].src,
"?")<0?"?enablejsapi=1":"&enablejsapi=1";else continue;d.push(f[e])}if(d.length>0)a&&a.length&&(x=a),h.onYouTubePlayerAPIReady=function(){for(var a,b=0;b<d.length;b++)a=new h.YT.Player(d[b]),a.addEventListener("onStateChange",T),a.addEventListener("onError",U)},b=g.createElement("script"),a="http:",g.location.protocol==="https:"&&(a="https:"),b.src=a+"//www.youtube.com/player_api",b.type="text/javascript",b.async=!0,a=g.getElementsByTagName("script")[0],a.parentNode.insertBefore(b,a)}q.prototype.n=
function(){if(!this.tracker){var a=h._gat._getTrackers();a.length>0&&(this.tracker=a[0])}};q.prototype.j=function(a,b){if(a&&a.length)for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1};q.prototype.a=function(a,b,c,d){function f(b){if(!b||!b.target)b=h.event,b.target=b.srcElement;return c.call(a,b)}a.addEventListener?a.addEventListener(b,f,!!d):a.attachEvent?a.attachEvent("on"+b,f):(b="on"+b,typeof a[b]==="function"&&(f=function(a,b){return function(){a.apply(this,arguments);b.apply(this,arguments)}}(a[b],
f)),a[b]=f)};q.prototype.h=function(a){function b(){if(!arguments.callee.r)arguments.callee.r=!0,a.apply(c,arguments)}var c=this;/^(interactive|complete)/.test(g.readyState)?b():(this.a(g,"DOMContentLoaded",b,!1),this.a(h,"load",b,!1))};h._gaq=h._gaq||[];var E=h._gas||[];if(!(E.k>=0)){var g=h.document,X=Object.prototype.hasOwnProperty,m=Array.prototype.slice,j=String.prototype.indexOf,J=g.location.href,o=g.documentElement;t.prototype.o=function(a,b){typeof a==="string"&&typeof b==="function"&&(typeof _gas.f[a]===
"undefined"&&(_gas.f[a]=[]),_gas.f[a].push(b));return!1};t.prototype.p=function(){var a=m.call(arguments),b=a.shift(),a=!0,c,d,f,e,g,i=0;if(typeof b==="function")return r(function(a,b){return function(){a.call(b)}}(b,this.g));else if(typeof b==="object"&&b.length>0){d=b.shift();j.call(d,".")>=0?(e=d.split(".")[0],d=d.split(".")[1]):e=n;if((f=this.f[d])&&f.length>0)for(c=0;c<f.length;c++)try{g=f[c].apply(this.g,b),g===!1?a=!1:g&&g.length>0&&(b=g)}catch(h){d!=="_trackException"&&this.push(["_trackException",
h])}if(a===!1)return 1;if(d==="_setAccount"){for(c in this.c)if(this.c[c]==b[0]&&e===n)return 1;e=e||"_gas"+String(this.k+1);typeof this.c._gas1=="undefined"&&j.call(e,"_gas")!=-1&&(e="_gas1");this.c[e]=b[0];this.k+=1;e=e===_gas.i?"":e+".";i=r([e+d,b[0]]);this.g.n();return i}if(d==="_link"||d==="_linkByPost")return a=m.call(b),a.unshift(d),r(a);if(e&&this.c[e])return g=(e===_gas.i?"":e+".")+d,a=m.call(b),a.unshift(g),r(a);for(c in this.c)X.call(this.c,c)&&(g=(c===_gas.i?"":c+".")+d,a=m.call(b),a.unshift(g),
i+=r(a));return i?1:0}};t.prototype.push=function(){for(var a=m.call(arguments),b=0;b<a.length;b++)(function(a,b){h._gaq.push(function(){b.p.call(b,a)})})(a[b],this)};h._gas=_gas=new t;_gas.push(["_addHook","_trackException",function(a,b){_gas.push(["_trackEvent","Exception "+(a.name||"Error"),b||a.message||a,J]);return!1}]);_gas.push(["_addHook","_setDebug",function(a){_gas.q=!!a}]);_gas.push(["_addHook","_popHook",function(a){(a=_gas.f[a])&&a.pop&&a.pop();return!1}]);_gas.push(["_addHook","_setDefaultTracker",
function(a){_gas.i=a}]);_gas.push(["_addHook","_trackPageview",function(){var a=m.call(arguments);return a.length>=2&&typeof a[0]==="string"&&typeof a[1]==="string"?[{page:a[0],title:a[1]}]:a}]);_gas.push(["_addHook","_trackDownloads",function(a){a?typeof a==="string"?a={extensions:a.split(",")}:a.length>=1&&(a={extensions:a}):a={extensions:[]};a.category=a.category||"Download";var b="xls,xlsx,doc,docx,ppt,pptx,pdf,txt,zip";b+=",rar,7z,exe,wma,mov,avi,wmv,mp3,csv,tsv";b=b.split(",");a.extensions=
a.extensions.concat(b);P.call(this,a);return!1}]);_gas.push(["_addHook","_trackEvent",function(){var a=m.call(arguments);a[3]&&(a[3]=(a[3]<0?0:Math.round(a[3]))||0);return a}]);_gas.push(["_addHook","_trackForms",function(a){var b=this;typeof a==="boolean"?a={live:a}:typeof a!=="object"&&(a={});a.category=a.category||"Form Tracking";a.live=a.live||!0;this.h(function(){for(var c=g.getElementsByTagName("form"),d=0;d<c.length;d++){try{Q.call(b,c[d],a)}catch(f){}if(a.live)break}return!1})}]);_gas.push(["_addHook",
"_trackVideo",function(){G.call(this,"video")}]);_gas.push(["_addHook","_trackAudio",function(){G.call(this,"audio")}]);var A=null,k=0,u;_gas.push(["_addHook","_trackMaxScroll",function(a){u=a||{};u.category=u.category||"Max Scroll";this.a(h,"scroll",I);this.a(h,"beforeunload",R)}]);_gas.e=!1;_gas.push(["_addHook","_setAllowAnchor",function(a){_gas.e=!!a}]);_gas.push(["_addHook","_link",function(a,b){if(b===n)b=_gas.e;return[a,b]}]);_gas.push(["_addHook","_linkByPost",function(a,b){if(b===n)b=_gas.e;
return[a,b]}]);var y=[],N=n;_gas.push(["_addHook","_setDomainName",function(a){if(j.call("."+g.location.hostname,a)<0)return y.push(a),!1;N=a}]);_gas.push(["_addHook","_addExternalDomainName",function(a){y.push(a);return!1}]);_gas.push(["_addHook","_setMultiDomain",function(a){var b=g.location.hostname,c=this,d,f,e,h=g.getElementsByTagName("a");a!=="now"&&a!=="mousedown"&&(a="click");for(d=0;d<h.length;d++)if(e=h[d],j.call(e.href,"http")===0&&!(e.hostname==b||j.call(e.hostname,N)>=0))for(f=0;f<y.length;f++)if(j.call(e.hostname,
y[f])>=0)a==="now"?e.href=c.tracker._getLinkerUrl(e.href,_gas.e):a==="click"?this.a(e,a,function(a){_gas.push(["_link",this.href,_gas.e]);a.preventDefault?a.preventDefault():a.returnValue=!1}):this.a(e,a,function(){this.href=c.tracker._getLinkerUrl(this.href,_gas.e)});return!1}]);_gas.push(["_addHook","_trackOutboundLinks",function(a){a||(a={});a.category=a.category||"Outbound";for(var b=g.getElementsByTagName("a"),c=0;c<b.length;c++)this.a(b[c],"mousedown",function(b){b=b.target;if((b.protocol==
"http:"||b.protocol=="https:")&&j.call(b.href,g.location.hostname)===-1){var c=b.pathname+b.search+"",e=j.call(c,"__utm");e!==-1&&(c=c.substring(0,e));_gas.push(["_trackEvent",a.category,b.hostname,c])}})}]);var L=[],p={},B={},M=!1,v;_gas.push(["_addHook","_trackVimeo",function(a){var b=this;if(typeof a==="boolean"||a==="force")a={force:!!a};a=a||{};a.category=a.category||"Vimeo Video";a.percentages=a.percentages||[];a.force=a.force||!1;v=a;b.h(function(){K.call(b)});return!1}]);var x=[],w,l={};for(_gas.push(["_addHook",
"_trackYoutube",function(a){var b=m.call(arguments),a=b[0]&&(typeof b[0]==="boolean"||b[0]==="force")?{force:!!b[0]}:{};b[1]&&b[1].length&&(a.percentages=b[1]);a=a||{};a.force=a.force||!1;a.category=a.category||"YouTube Video";a.percentages=a.percentages||[];w=a;var c=this;c.h(function(){W.call(c,a)});return!1}]);_gas.m.length>0;)_gas.push(_gas.m.shift());_gaq&&_gaq.length>=0&&function(){var a=g.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==g.location.protocol?"https://ssl":
"http://www")+".google-analytics.com/ga.js";var b=g.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()}})(window);
