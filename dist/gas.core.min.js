/*
 Copyright 2011, Cardinal Path and Direct Performance.

 GAS - Google Analytics on Steroids
 https://bitbucket.org/dpc/gas

 @author Eduardo Cereto <eduardocereto@gmail.com>
 $Revision$
 $Date$
 Licensed under the MIT license.
*/
(function(b,m){function n(a){return a===b._gas._default_tracker?"":a+"."}function j(a){if(_gas.debug_mode)try{console.log(a)}catch(c){}return b._gaq.push(a)}b._gaq=b._gaq||[];var o=b._gas||[];if(!(o._accounts_length>=0)){var l=b.document,q=Object.prototype.toString,r=Object.prototype.hasOwnProperty,k=Array.prototype.slice,p=String.prototype.indexOf,s=l.location.href;b._gas=_gas={_accounts:{},_accounts_length:0,_hooks:{},_queue:o,_default_tracker:"_gas1",gh:{}};b._gas._hooks._addHook=[function(a,c){typeof a===
"string"&&typeof c==="function"&&(typeof b._gas._hooks[a]==="undefined"&&(b._gas._hooks[a]=[]),b._gas._hooks[a].push(c));return!1}];b._gas._execute=function(){var a=k.call(arguments),c=a.shift(),a=!0,e,d,g,f,h;if(typeof c==="function")return j(function(a){return function(){a.call(b._gas.gh)}}(c));else if(typeof c==="object"&&c.length>0){d=c.shift();p.call(d,".")>=0?(f=d.split(".")[0],d=d.split(".")[1]):f=m;if((g=b._gas._hooks[d])&&g.length>0)for(e=0;e<g.length;e++)try{h=g[e].apply(b._gas.gh,c),h===
!1&&(a=!1),h&&h.length>0&&(c=h)}catch(i){d!=="_trackException"&&b._gas.push(["_trackException",i])}if(a===!1)return 1;if(d==="_setAccount"){for(e in b._gas._accounts)if(b._gas._accounts[e]==c[0]&&f===m)return 1;f=f||"_gas"+String(b._gas._accounts_length+1);typeof b._gas._accounts._gas1=="undefined"&&p.call(f,"_gas")!=-1&&(f="_gas1");b._gas._accounts[f]=c[0];b._gas._accounts_length+=1;f=n(f);return j([f+d,c[0]])}if(d==="_link"||d==="_linkByPost")return a=k.call(c),a.unshift(d),j(a);if(f&&b._gas._accounts[f])return h=
n(f)+d,a=k.call(c),a.unshift(h),j(a);g=0;for(e in b._gas._accounts)r.call(b._gas._accounts,e)&&(h=n(e)+d,a=k.call(c),a.unshift(h),g+=j(a));return g?1:0}};b._gas.push=function(){for(var a=k.call(arguments),c=0;c<a.length;c++)(function(a){_gaq.push(function(){b._gas._execute.call(b._gas.gh,a)})})(a[c])};b._gas.push(["_addHook","_trackException",function(a,c){b._gas.push(["_trackEvent","Exception "+(a.name||"Error"),c||a.message||a,s]);return!1}]);b._gas.push(["_addHook","_setDebug",function(a){b._gas.debug_mode=
!!a}]);b._gas.push(["_addHook","_popHook",function(a){(a=b._gas._hooks[a])&&a.pop&&a.pop();return!1}]);b._gas.push(["_addHook","_setDefaultTracker",function(a){b._gas._default_tracker=a}]);var i=function(a){this.tracker=a};i.prototype.inArray=function(a,b){if(a&&a.length)for(var e=0;e<a.length;e++)if(a[e]===b)return!0;return!1};i.prototype.isArray=function(a){return q.call(a)==="[object Array]"};i.prototype._sanitizeString=function(a,b){a=a.toLowerCase().replace(/^\ +/,"").replace(/\ +$/,"").replace(/\s+/g,
"_").replace(/[\u00e1\u00e0\u00e2\u00e3\u00e5\u00e4\u00e6\u00aa]/g,"a").replace(/[\u00e9\u00e8\u00ea\u00eb\u0404\u20ac]/g,"e").replace(/[\u00ed\u00ec\u00ee\u00ef]/g,"i").replace(/[\u00f3\u00f2\u00f4\u00f5\u00f6\u00f8\u00ba]/g,"o").replace(/[\u00fa\u00f9\u00fb\u00fc]/g,"u").replace(/[\u00e7\u00a2\u00a9]/g,"c");b&&(a=a.replace(/[^a-z0-9_-]/g,"_"));return a.replace(/_+/g,"_")};i.prototype._addEventListener=function(a,c,e,d){var g=function(c){c=c||b.event;return e.call(a,c)};d===m&&(d=!1);return a.addEventListener?
(a.addEventListener(c,g,!!d),!0):a.attachEvent?a.attachEvent("on"+c,g):(c="on"+c,typeof a[c]==="function"&&(g=function(a,b){return function(){a.apply(this,arguments);b.apply(this,arguments)}}(a[c],g)),a[c]=g,!0)};for(b._gas.push(function(){var a=_gat._getTrackerByName();b._gas.gh=new i(a)});b._gas._queue.length>0;)b._gas.push(b._gas._queue.shift());_gaq&&_gaq.length>=0&&function(){var a=l.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==l.location.protocol?"https://ssl":
"http://www")+".google-analytics.com/ga.js";var b=l.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()}})(window);
